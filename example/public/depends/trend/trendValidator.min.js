if("undefined"==typeof jQuery)throw new Error("TrendValidator requires jQuery");!function(t){function a(a,r){this.$form=a,this.options=t.extend(t.fn.trendValidator.DEFAULT_OPTIONS,r),this._init()}a.prototype={_init:function(){var t=(this.options.type,0);if("object"==typeof this.options.fields&&void 0!==this.options.fields&&(t=this._parseFields()),0===t)try{this.options.success()}catch(a){throw new Error("trendValidator：未提供验证成功后的回调函数[success]")}},_parseFields:function(){var a=0;for(var r in this.options.fields){var e=this.$form.find("[name="+r+"]"),s=this.options.fields[r];-1!==r.indexOf("#")&&(r=r.split("#")[1],e=this.$form.find("[id="+r+"]"),s=this.options.fields["#"+r]);var n=this.$form.find(s.container||"#"+r+"Message");for(var d in s.validators){var i=t.fn.trendValidator.validators[d];if(i&&"function"==typeof i){"phone"===d&&(s.validators[d].country=s.validators[d].country||"CN");var o=i({field:e,validator:s.validators[d]});if(o){n.html(""),n.parent().removeClass("tui-has-error");continue}n.html(s.validators[d].message),n.parent().addClass("tui-has-error"),0===a&&e.focus(),a++}}}return a},_parseOptions:function(a,r){var e=a.attr("data-tv-valid")||a.attr("name"),s={"data-tv-notempty":"notEmpty","data-tv-numeric":"numeric"};if("true"==e)for(var n in s){var d=a.attr(n);return t.fn.trendValidator.validators[s[n]](a)?!0:(t(r).html(d),a.focus(),!1)}var i=a.attr("data-tv-identical");if(i){var o=t("[name="+i+"]");if(a.val()!==o.val())return t(r).html(a.attr("data-tv-identical-message")),a.focus(),!1}var l=a.attr("data-tv-minlength");if(l&&(l=parseInt(l,10),a.val().length<l))return t(r).html(a.attr("data-tv-minlength-message")),a.focus(),!1;var f=a.attr("data-tv-maxlength");if(f&&(f=parseInt(f,10),a.val().length>f))return t(r).html(a.attr("data-tv-maxLength-message")),a.focus(),!1;var v=a.attr("data-tv-bankcard");if(v){var u=t.fn.trendValidator.validators.bankCard(a.val());if(!u)return t(r).html(v),a.focus(),!1}}},t.fn.trendValidator=function(t){new a(this,t)},t.fn.trendValidator.DEFAULT_OPTIONS={type:"complex"},t.fn.trendValidator.validators={}}(window.jQuery),function(t){t.fn.trendValidator.validators.notEmpty=function(a){return""!==t.trim(a.field.val())},t.fn.trendValidator.validators.numeric=function(t){var a=t.field.val();return-1===a.indexOf(" ")&&!isNaN(parseFloat(a))&&isFinite(a)},t.fn.trendValidator.validators.email=function(t){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return a.test(t.field.val())},t.fn.trendValidator.validators.idCard=function(t){var a=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return a.test(t.field.val())},t.fn.trendValidator.validators.phone=function(a){var r=t.trim(a.field.val()),e=a.validator.country,s=!1;switch(e.toUpperCase()){case"BR":s=/^(([\d]{4}[-.\s]{1}[\d]{2,3}[-.\s]{1}[\d]{2}[-.\s]{1}[\d]{2})|([\d]{4}[-.\s]{1}[\d]{3}[-.\s]{1}[\d]{4})|((\(?\+?[0-9]{2}\)?\s?)?(\(?\d{2}\)?\s?)?\d{4,5}[-.\s]?\d{4}))$/.test(r);break;case"CN":s=/^((00|\+)?(86(?:-| )))?((\d{11})|(\d{3}[- ]{1}\d{4}[- ]{1}\d{4})|((\d{2,4}[- ]){1}(\d{7,8}|(\d{3,4}[- ]{1}\d{4}))([- ]{1}\d{1,4})?))$/.test(r);break;case"CZ":s=/^(((00)([- ]?)|\+)(420)([- ]?))?((\d{3})([- ]?)){2}(\d{3})$/.test(r);break;case"DE":s=/^(((((((00|\+)49[ \-\/]?)|0)[1-9][0-9]{1,4})[ \-\/]?)|((((00|\+)49\()|\(0)[1-9][0-9]{1,4}\)[ \-\/]?))[0-9]{1,7}([ \-\/]?[0-9]{1,5})?)$/.test(r);break;case"DK":s=/^(\+45|0045|\(45\))?\s?[2-9](\s?\d){7}$/.test(r);break;case"ES":s=/^(?:(?:(?:\+|00)34\D?))?(?:9|6)(?:\d\D?){8}$/.test(r);break;case"FR":s=/^(?:(?:(?:\+|00)33[ ]?(?:\(0\)[ ]?)?)|0){1}[1-9]{1}([ .-]?)(?:\d{2}\1?){3}\d{2}$/.test(r);break;case"GB":s=/^\(?(?:(?:0(?:0|11)\)?[\s-]?\(?|\+)44\)?[\s-]?\(?(?:0\)?[\s-]?\(?)?|0)(?:\d{2}\)?[\s-]?\d{4}[\s-]?\d{4}|\d{3}\)?[\s-]?\d{3}[\s-]?\d{3,4}|\d{4}\)?[\s-]?(?:\d{5}|\d{3}[\s-]?\d{3})|\d{5}\)?[\s-]?\d{4,5}|8(?:00[\s-]?11[\s-]?11|45[\s-]?46[\s-]?4\d))(?:(?:[\s-]?(?:x|ext\.?\s?|\#)\d+)?)$/.test(r);break;case"MA":s=/^(?:(?:(?:\+|00)212[\s]?(?:[\s]?\(0\)[\s]?)?)|0){1}(?:5[\s.-]?[2-3]|6[\s.-]?[13-9]){1}[0-9]{1}(?:[\s.-]?\d{2}){3}$/.test(r);break;case"PK":s=/^0?3[0-9]{2}[0-9]{7}$/.test(r);break;case"RO":s=/^(\+4|)?(07[0-8]{1}[0-9]{1}|02[0-9]{2}|03[0-9]{2}){1}?(\s|\.|\-)?([0-9]{3}(\s|\.|\-|)){2}$/g.test(r);break;case"RU":s=/^((8|\+7|007)[\-\.\/ ]?)?([\(\/\.]?\d{3}[\)\/\.]?[\-\.\/ ]?)?[\d\-\.\/ ]{7,10}$/g.test(r);break;case"SK":s=/^(((00)([- ]?)|\+)(420)([- ]?))?((\d{3})([- ]?)){2}(\d{3})$/.test(r);break;case"TH":s=/^0\(?([6|8-9]{2})*-([0-9]{3})*-([0-9]{4})$/.test(r);break;case"VE":s=/^0(?:2(?:12|4[0-9]|5[1-9]|6[0-9]|7[0-8]|8[1-35-8]|9[1-5]|3[45789])|4(?:1[246]|2[46]))\d{7}$/.test(r);break;case"US":r=r.replace(/\D/g,""),s=/^(?:(1\-?)|(\+1 ?))?\(?(\d{3})[\)\-\.]?(\d{3})[\-\.]?(\d{4})$/.test(r)&&10===r.length;break;default:s=/^((00|\+)?(86(?:-| )))?((\d{11})|(\d{3}[- ]{1}\d{4}[- ]{1}\d{4})|((\d{2,4}[- ]){1}(\d{7,8}|(\d{3,4}[- ]{1}\d{4}))([- ]{1}\d{1,4})?))$/.test(r)}return s},t.fn.trendValidator.validators.bankCard=function(t){var a=t.field.val()||"";if(""===a)return!1;for(var r=a.substr(a.length-1,1),e=a.substr(0,a.length-1),s=[],n=e.length-1;n>-1;n--)s.push(e.substr(n,1));for(var d=[],i=[],o=[],l=0;l<s.length;l++)(l+1)%2==1?2*parseInt(s[l])<9?d.push(2*parseInt(s[l])):i.push(2*parseInt(s[l])):o.push(s[l]);for(var f=[],v=[],u=0;u<i.length;u++)f.push(parseInt(i[u])%10),v.push(parseInt(i[u])/10);for(var c=0,p=0,h=0,m=0,$=0,b=0;b<d.length;b++)c+=parseInt(d[b]);for(var g=0;g<o.length;g++)p+=parseInt(o[g]);for(var k=0;k<f.length;k++)h+=parseInt(f[k]),m+=parseInt(v[k]);$=parseInt(c)+parseInt(p)+parseInt(h)+parseInt(m);var I=parseInt($)%10===0?10:parseInt($)%10,y=10-I;return r==y}}(window.jQuery);