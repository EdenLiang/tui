{"version":3,"sources":["../../src/components/login.js"],"names":[],"mappings":"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","file":"login.js","sourcesContent":[";(function(){\n\tif (typeof jQuery === 'undefined' || typeof React === 'undefined') {\n\t\tthrow new Error('TUI requires jQuery and React.');\n\t}\n\n\tvar TUI = window.TUI || {};\n\n\tvar Login = React.createClass({\n\t\tgetInitialState: function() {\n\t\t\treturn {\n\t\t\t\talertClass: 'alert tui-alert',\n\t\t\t\tcaptchaClass: 'hide'\n\t\t\t};\n\t\t},\n\t\t// 刷新验证码\n\t\trefreshCaptcha() {\n\t\t\t$('input[name=checkCaptcha]').val('Y');\n\t\t\t$('#sign-captcha').attr('src', '/captcha?' + Math.random());\n\t\t},\n\t\tloginEvent: function() {\n\t\t\tvar data = {\n\t\t\t\tusername: this.refs[this.props.fields.username].value,\n\t\t\t\tpassword: this.refs[this.props.fields.password].value,\n\t\t\t\tcheckCaptcha: this.refs['checkCaptcha'].value,\n\t\t\t\tcaptcha: this.refs['captcha'].value\n\t\t\t};\n\n\t\t\t// 非空验证\n\t\t\tif (data.username && data.password) {\n\t\t\t\tTUI.Loading({ text: '正在登录' });\n\n\t\t\t\t$.post(this.props.loginUrl, data, function(result) {\n\t\t\t\t\tTUI.Loading({ className: 'hide' });\n\n\t\t\t\t\tif (result && result.error) {\n\t\t\t\t \t\tvar code = result.error.code;\n\n\t\t\t\t \t\tswitch(code) {\n\t\t\t\t \t\t\tcase 2000:\n\t\t\t\t \t\t\t\tthis.alertRender('用户名或密码错误');\n\t\t\t\t \t\t\t\tbreak;\n\t\t\t\t \t\t\tcase 2001:\n\t\t\t\t \t\t\t\tthis.alertRender('用户名或密码错误');\n\t\t\t\t \t\t\t\tbreak;\n\t\t\t\t \t\t\tcase 2002:\n\t\t\t\t \t\t\t\tthis.alertRender('验证码错误');\n\t\t\t\t \t\t\t\tthis.setState({captchaClass: 'show'});\n\t         \t\t\t\t\tthis.refreshCaptcha();\n\t\t\t\t \t\t\t\tbreak;\n\t\t\t\t \t\t\tcase 2003:\n\t\t\t\t \t\t\t\tthis.alertRender('用户名或密码错误');\n\t         \t\t\t\t\trefreshCaptcha();\n\t\t\t\t \t\t\t\tbreak;\n\t\t\t\t \t\t\tcase 2004:\n\t\t\t\t \t\t\t\tthis.alertRender('该用户已被冻结');\n\t\t\t\t \t\t\t\tbreak;\n\t\t\t\t \t\t\tcase '-1':\n\t\t\t\t \t\t\t\tthis.alertRender('验证码错误');\n\t\t\t\t \t\t\t\tthis.refreshCaptcha();\n\t\t\t\t \t\t\t\tbreak;\t\n\t\t\t \t\t\t\tdefault:\n\t\t\t \t\t\t\t\tthis.alertRender('用户名/手机号或密码错误');\t\t\n\t\t\t \t\t\t\t\tbreak;\n\t\t\t\t \t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 登录成功\n\t\t\t\t\t\tlocation.href = this.props.loginSuccessUrl;\n\t\t\t\t\t}\n\t\t\t\t}.bind(this));\n\t\t\t} else {\n\t\t\t\tthis.alertRender('用户名或密码不能为空');\n\t\t\t}\n\t\t},\n\t\talertRender: function(alertContent) {\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\talertClass: 'alert alert-danger tui-alert',\n\t\t\t\t\talertContent: alertContent\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\trender: function() {\n\t\t\treturn (\n\t\t\t\t<div className=\"col-md-4 col-md-offset-4 tui-login\">\n\t\t        \t<h2 className=\"login-header\">{this.props.loginTitle}</h2>\n\t\t        \t<div className={this.state.alertClass}>{this.state.alertContent}</div>\n\t\t        \t<div className=\"well login-well\">\n\t\t\t          \t<form className=\"form-horizontal\">\n\t\t\t\t            <div className=\"form-group\">\n\t\t\t              \t\t<input type=\"text\" ref={this.props.fields.username} className=\"form-control\" placeholder=\"用户名\" style={{'height': '40px'}}/>\n\t\t\t\t            </div>\n\t\t\t\t            <div className=\"form-group\">\n\t\t\t\t              <input type=\"password\" ref={this.props.fields.password} className=\"form-control\" placeholder=\"密码\" style={{'height': '40px'}}/>\n\t\t\t\t            </div>\n\t\t\t\t            <div className={this.state.captchaClass + ' form-group'}>\n\t\t\t\t\t\t\t\t<div className=\"col-sm-7 captcha-col\" style={{'paddingLeft': '0'}}>\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" ref=\"checkCaptcha\" name=\"checkCaptcha\" value=\"N\" />\n\t   \t\t\t\t\t\t\t\t<input ref=\"captcha\" name=\"captcha\" type=\"text\" className=\"form-control\" placeholder=\"验证码\" />\n\t   \t\t\t\t\t\t\t</div>\n\t   \t\t\t\t\t\t\t<div className=\"col-sm-5\" style={{'paddingRight': '0'}}>\n\t   \t\t\t\t\t\t\t\t<a href=\"javascript:;\" className=\"pull-right\" title=\"刷新验证码\" onClick={this.refreshCaptcha}><img style={{'height': '40px', 'width': '90px', 'borderRadius': '5px', 'border': '1px solid #ccc'}} id=\"sign-captcha\" alt=\"验证码\" /></a>\n\t   \t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t            <div className=\"form-group\" style={{'marginBottom': '0'}}>\n\t\t\t\t              <button type=\"button\" className=\"ebtn ebtn-primary ebtn-rounded ebtn-lg btn-block\" onClick={this.loginEvent}>登&nbsp;&nbsp;录</button>\n\t\t\t\t            </div>\n\t\t\t          \t</form>\n\t\t        \t</div>\n\t\t        \t<h6 className=\"text-center\" style={{'color': '#C8C8C8', 'fontWeight': 'normal'}}>Powered by TUI & Trend云后台</h6>\n\t\t        </div>\n\t\t\t);\n\t\t}\n\t});\n\n\t// 登录\n\tTUI.Login = Login;\n\n    if (typeof module !== 'undefined' && typeof exports === 'object') {\n        module.exports = TUI;\n    } else if (typeof define === 'function' && (define.amd || define.cmd)) {\n        define(function() { return TUI; });\n    } else {\n        window.TUI = TUI;\n    }\n}).call(function() {\n\treturn this || (typeof window !== 'undefined' ? window : global);\n});"]}