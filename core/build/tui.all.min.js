var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};(function(){if("undefined"==typeof jQuery||"undefined"==typeof React)throw new Error("TUI requires jQuery and React.");var e={version:"1.1.7"},t=React.createClass({displayName:"EntityDetail",getInitialState:function(){var e=this.props.entity.fields,t={};for(var a in e){var n=e[a];t[n.field]={message:""}}return{fields:t}},create:function(){var t=this.props.entity;try{if(this.validators()){var a=this.props.backList,n=1,r=this.props.formId,s=t.create,i=s?s.url:"",l=s?s.method:"",c=s?s.callback:"";""!==this.refs[t.key].value&&(i=t.update.url,l=t.update.method,c=t.update.callback,n=this.props.currentPage),i&&"function"==typeof c?(x({text:"正在处理"}),$.ajax({method:l||"POST",url:i,data:$("#"+r).serialize(),dataType:"JSON",success:function(t){x({className:"hide"}),"success"===c(t)?(e.success("保存成功"),$("#"+r+" button[type=reset]").click(),a(!0,n)):e.danger("保存失败")},error:function(t,a,n){throw x({className:"hide"}),e.danger(i+"远程调用异常［"+a+", "+n+"］"),new Error(i+"远程调用异常［"+a+", "+n+"］")}})):e.danger("保存实体配置有误，使用说明请查看［entity.create和entity.update］")}}catch(o){throw e.danger("保存实体配置有误，"+o),new Error("保存实体配置有误，"+o)}},validators:function(){for(var t=this.props.entity.fields,a=$("#"+this.props.formId).serializeArray(),n={},r=0,s=0;s<a.length;s++){var i=a[s];n[i.name]=i.value}for(var l in t){var c=t[l],o=c.validators,d=void 0===c.disabled?!1:c.disabled,u=void 0===c.readOnly?!1:c.readOnly;if((d===!1||u===!1)&&"object"==typeof o){var p=n[c.field],m=o.notEmpty,h=o.remote,f=this.state.fields;f[c.field].message.length>0&&(f[c.field]={message:""},this.setState({fields:f})),"object"==typeof m&&p.length<1?(f[c.field]={message:m.message||c.text+"不能为空"},this.setState({fields:f}),r++):"object"==typeof h&&$.ajax({type:"GET",async:!1,url:h.url,data:{key:h.data.key,value:c.field===c.field?encodeURI(p):h.data.value},success:function(e){e.valid||(r++,f[c.field]={message:h.message||c.text+"错误"},this.setState({fields:f}))}.bind(this),error:function(t,a,n){throw e.danger("TUI: remote url["+h.url+"]远程调用异常，"+a+", "+n),new Error("TUI: remote url["+h.url+"]远程调用异常，"+a+", "+n)}})}}return 0===r?!0:!1},render:function(){var e="form-horizontal "+this.props.className,t=this.props.entityData,r=this.props.entity.key,s="";return"object"==typeof t&&""!==t[r]&&(s=t[r]),React.createElement("form",{id:this.props.formId,className:e},React.createElement("input",{type:"hidden",ref:r,name:r,value:s}),React.createElement("div",{className:"form-group"},React.createElement("a",{href:"javascript:;",className:"col-sm-2",onClick:this.props.backList},React.createElement("i",{className:"fa fa-arrow-left"})," 返回列表")),React.createElement("hr",null),this.props.entity.fields.map(function(e,n){return React.createElement("div",{key:n,className:"form-group"},React.createElement("label",{className:"col-sm-2 control-label"},e.text),React.createElement("div",{className:"col-sm-8"},React.createElement(a,{keyValue:s,field:e,entityData:t}),React.createElement("span",{className:"tui-error"},this.state.fields[e.field].message)))}.bind(this)),React.createElement(n,{keyValue:s,backList:this.props.backList,create:this.create,update:this.props.entity.update,entityData:t,custom:this.props.entity.custom||[]}))}}),a=React.createClass({displayName:"EntityField",render:function(){var e=this.props.entityData,t=this.props.field,a=t.type||"text",n="",o={type:a,field:t,entityData:e,keyValue:this.props.keyValue};switch(a){case"text":n=React.createElement(r,o);break;case"select":n=React.createElement(s,o);break;case"radio":n=React.createElement(i,o);break;case"textarea":n=React.createElement(l,o);break;case"editor":n=React.createElement(c,o);break;default:n=React.createElement(r,o)}return n}}),n=React.createClass({displayName:"EntityHandle",customHandle:function(e){var t=this.props.custom[e.target.dataset.customid].handle(this.props.entityData);t&&"success"===t&&this.props.backList(!0)},render:function(){var e=this.props.entityData,t=this.props.keyValue,a=this.props.update,n="";return void 0===t?n=React.createElement("button",{type:"button",className:"ebtn ebtn-success ebtn-rounded tui-mr5",onClick:this.props.create},"添加"):""!==t&&a&&(a.condition&&"function"==typeof a.condition?"success"===a.condition(e)&&(n=React.createElement("button",{type:"button",className:"ebtn ebtn-success ebtn-rounded tui-mr5",onClick:this.props.create},"保存")):n=React.createElement("button",{type:"button",className:"ebtn ebtn-success ebtn-rounded tui-mr5",onClick:this.props.create},"保存")),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-4 col-sm-offset-2"},n,React.createElement("button",{type:"button",className:"ebtn ebtn-default ebtn-rounded tui-mr5",onClick:this.props.backList},"取消"),this.props.custom.map(function(e,t){return React.createElement("button",{key:t,type:"button",className:"tui-mr5 "+e.className,onClick:this.customHandle,"data-customid":t},e.text)}.bind(this)),React.createElement("button",{type:"reset",style:{display:"none"}},"重置")))}}),r=React.createClass({displayName:"EntityText",getInitialState:function(){return{value:""}},shouldComponentUpdate:function(e,t){if(e.keyValue!==this.props.keyValue||this.state.value!==t.value){var a=t.value;return this.state.value===t.value&&(a=e.entityData[e.field.field]),this.setState({value:a}),!0}return!1},entityTextChangeHandle:function(e){this.setState({value:e.target.value})},render:function(){var e=this.props.field;this.props.entityData;return""!==this.props.keyValue?React.createElement("input",{type:this.props.type,className:"form-control",name:e.field,ref:e.field,placeholder:e.placeholder||e.text,value:this.state.value,onChange:this.entityTextChangeHandle,disabled:e.disabled||!1,readOnly:e.readOnly||!1}):React.createElement("input",{type:this.props.type,className:"form-control",name:e.field,ref:e.field,placeholder:e.placeholder||e.text,defaultValue:""})}}),s=React.createClass({displayName:"EntitySelect",getInitialState:function(){return{value:"",options:{rows:[]}}},componentDidMount:function(){var e=this.props.field.options;if("string"==typeof e||e instanceof Array==!1){var t="object"==typeof e,a=t?e.url:e;$.get(a,function(e){if(this.isMounted()){a=this.props.field.options;var a={rows:e,textField:t?a.textField:"text",valueField:t?a.valueField:"value"};this.setState({options:a})}}.bind(this))}},shouldComponentUpdate:function(e,t){if(e.keyValue!==this.props.keyValue||this.state.value!==t.value){var a=t.value;return this.state.value===t.value&&(a=e.entityData[e.field.field]),this.setState({value:a}),!0}return!1},entitySelectChangeHandle:function(e){this.setState({value:e.target.value})},render:function(){var e=this.props.field;return e.options instanceof Array?React.createElement("select",{ref:e.field,name:e.field,className:"form-control",value:this.state.value,onChange:this.entitySelectChangeHandle},e.options.map(function(e,t){return React.createElement("option",{key:t,value:e.value},e.text)}.bind(this))):React.createElement("select",{ref:e.field,name:e.field,className:"form-control",value:this.state.value,onChange:this.entitySelectChangeHandle},this.state.options.rows.map(function(e,t){return React.createElement("option",{key:t,value:e[this.state.options.valueField]},e[this.state.options.textField])}.bind(this)))}}),i=React.createClass({displayName:"EntityRadio",getInitialState:function(){return{value:""}},shouldComponentUpdate:function(e,t){if(e.keyValue!==this.props.keyValue||this.state.value!==t.value){var a=t.value;return this.state.value===t.value&&(a=e.entityData[e.field.field]),this.setState({value:a}),!0}return!1},entityRadioChangeHandle:function(e){this.setState({value:e.target.value})},render:function(){var e=this.props.field,t="";return""!==this.props.keyValue&&(t=this.props.entityData[e.field]),React.createElement("p",{className:"form-control-static"},e.options.map(function(a,n){var r="";return r=t?React.createElement("input",{checked:this.state.value==a.value,type:"radio",ref:e.field,name:e.field,value:a.value,onChange:this.entityRadioChangeHandle}):React.createElement("input",{type:"radio",ref:e.field,name:e.field,value:a.value}),React.createElement("span",{key:n,style:{marginRight:"10px"}},React.createElement("label",{className:"tui-label"},a.text)," ",r)}.bind(this)))}}),l=React.createClass({displayName:"EntityTextarea",getInitialState:function(){return{value:""}},shouldComponentUpdate:function(e,t){if(e.keyValue!==this.props.keyValue||this.state.value!==t.value){var a=t.value;return this.state.value===t.value&&(a=e.entityData[e.field.field]),this.setState({value:a}),!0}return!1},entityTextareaChangeHandle:function(e){this.setState({value:e.target.value})},render:function(){var e=this.props.field;return""===this.props.keyValue?React.createElement("textarea",{rows:"5",className:"form-control",name:e.field,ref:e.field,placeholder:e.text}):React.createElement("textarea",{rows:"5",className:"form-control",name:e.field,ref:e.field,placeholder:e.text,value:this.state.value,onChange:this.entityTextareaChangeHandle,disabled:e.disabled||!1,readOnly:e.readOnly||!1})}}),c=React.createClass({displayName:"EntityEditor",getInitialState:function(){return{editor:{}}},shouldComponentUpdate:function(e,t){if(e.keyValue!==this.props.keyValue||this.state.value!==t.value){var a=t.value;this.state.value===t.value&&(a=e.entityData[e.field.field]);var n=this.state.editor;void 0===a&&(a=""),n.setValue(a)}return!1},componentDidMount:function(){if(this.isMounted()){var t=["title","bold","italic","underline","strikethrough","color","|","ol","ul","blockquote","code","table","|","link","image","hr","|","indent","outdent"],a=new Simditor({textarea:$("#"+this.props.field.field),toolbar:t,upload:{url:e.config.simditor.url,params:null,fileKey:"fileDataFileName",connectionCount:3,leaveConfirm:"正在上传文件"}});this.setState({editor:a})}},render:function(){var e=this.props.field;return""===this.props.keyValue?React.createElement("textarea",{id:e.field,rows:"5",className:"form-control",name:e.field,ref:e.field,placeholder:e.text}):React.createElement("textarea",{id:e.field,rows:"5",className:"form-control",name:e.field,ref:e.field,placeholder:e.text})}}),o=React.createClass({displayName:"TableComp",getInitialState:function(){var e=this.props.options.searchbar,t=this.props.options.toolbar,a=[],n={},r=this.props.options.pagination,s=this.props.options.formId||"tui-"+Math.random().toString(36).substr(2);if(e instanceof Array&&e.length>0){for(var i=0;i<e.length;i++)"object"==typeof e[i]&&e[i].field&&a.push({field:e[i].field,type:e[i].type||"text"});n.searchbar=e,n.searchbarCols=a,n._pagingClick=this._pagingClick,n.goCreate=this.goCreate,n.formId=s,n.hasAdd=this.props.entity&&this.props.entity.create?!0:!1,e=React.createElement(d,n)}else e=React.createElement(d,{searchbar:[],goCreate:this.goCreate,hasAdd:this.props.entity&&this.props.entity.create?!0:!1});return t=t instanceof Array&&t.length>0?React.createElement(u,{toolbar:t}):React.createElement(u,{toolbar:[]}),{formId:s,isShowEntityDetail:!1,searchbar:e,toolbar:t,searchbarCols:a,tableDataProps:{},pagination:"boolean"==typeof r&&r===!0||"undefined"==typeof r?"正在加载分页...":"",currentPage:1,maxSize:"number"==typeof this.props.options.maxSize?this.props.options.maxSize:10}},componentDidMount:function(){this.props.options.url&&this._loadData(1)},componentWillReceiveProps:function(e){e.options.refresh&&this.refresh(this.state.currentPage)},_pagingClick:function(e){e.preventDefault(),this._loadData(e.currentTarget.dataset.page)},backList:function(e,t){$("#find-"+this.state.formId).find(".tui-error").text(""),this.setState({isShowEntityDetail:!1,entityData:{}}),e="boolean"==typeof e?e:!1,e&&this.refresh(t)},refresh:function(e){this._loadData(this.state.currentPage)},changeMaxSize:function(e){this.setState({maxSize:e}),this._loadData(this.state.currentPage,e)},_loadData:function(t,a){x();var n=this.props.options.url,r=this.state.searchbarCols,s=this.props.options.data||{random:Math.random()};s.maxSize=a||this.state.maxSize,s.currentPage=t||1;for(var i=0;i<r.length;i++){var l=r[i].field,c="";switch(r[i].type){case"text":c=$("#"+this.state.formId).find("input[name="+l+"]").val();break;case"radio":c=$("#"+this.state.formId).find("input[name="+l+"]:checked").val();break;default:c=$("#"+this.state.formId).find("[name="+l+"]").val()}c&&(s[l]=c)}$.ajax({url:n,data:s,dataType:"JSON",success:function(t){if(x({className:"hide"}),"object"!=typeof t||void 0===t.rows||void 0===t.rowCount)throw e.danger("TUI Table 远程调用返回数据格式不正确［未检测到rows，rowCount］"),new Error("TUI Table 远程调用返回数据格式不正确［未检测到rows，rowCount］");if(this.isMounted()){var a=this.props.options.pagination,n={options:this.props.options,isCheckAll:!1},r={rowCount:t.rowCount,currentPage:s.currentPage,maxSize:s.maxSize,_pagingClick:this._pagingClick,changeMaxSize:this.changeMaxSize};this.setState({rows:t.rows,tableDataProps:n,pagination:"boolean"==typeof a&&a===!0||"undefined"==typeof a?React.createElement(h,r):"",currentPage:s.currentPage})}}.bind(this),error:function(t,a,n){throw x({className:"hide"}),e.danger("TUI Table 远程调用异常［"+a+", "+n+"］"),new Error("TUI Table 远程调用异常［"+a+", "+n+"］")}})},deleteHandle:function(t){var a=this.refresh,n={id:"delModal",title:"删除确认",content:'<div class="alert alert-warning">确定要删除该条纪录吗？</div>',confirm:function(){return $.ajax({method:t.method||"get",url:t.url,success:function(n){"success"===t.callback(n)?(e.success("删除成功"),a()):e.danger("删除失败")},error:function(a,r,s){throw $("#"+n.id).modal("hide"),e.danger(t.url+"远程调用异常［"+r+", "+s+"］"),new Error(t.url+"远程调用异常［"+r+", "+s+"］")}}),"success"}};v(n)},findHandle:function(t){x(),$.ajax({method:t.method||"GET",url:t.url,success:function(e){x({className:"hide"}),"function"==typeof t.callback&&(e=t.callback(e)),this.goCreate(e)}.bind(this),error:function(a,n,r){throw x({className:"hide"}),e.danger(t.url+"远程调用异常［"+n+", "+r+"］"),new Error(t.url+"远程调用异常［"+n+", "+r+"］")}})},goCreate:function(t){"object"==typeof this.props.entity&&this.props.entity.fields instanceof Array?this.setState({isShowEntityDetail:!0,entityData:t}):e.danger("请先添加实体属性，使用说明请看［entity.fields］")},handlerCheckForParent:function(e,t){this.state.rows[e].isCheck=t,this.setState({rows:this.state.rows})},checkAll:function(e){this.state.rows.map(function(t,a){return t.isCheck=e,t}),this.state.tableDataProps.isCheckAll=e,this.setState({rows:this.state.rows,tableDataProps:this.state.tableDataProps})},render:function(){var e="";return this.props.entity&&(e=React.createElement(t,{className:this.state.isShowEntityDetail?"show":"hide",formId:"find-"+this.state.formId,backList:this.backList,entity:this.props.entity,entityData:this.state.entityData,currentPage:this.state.currentPage})),React.createElement("div",{className:"well"},React.createElement("form",{id:this.state.formId,className:this.state.isShowEntityDetail?"hide":"show"},this.state.searchbar,this.state.toolbar,React.createElement(p,_extends({rows:this.state.rows},this.state.tableDataProps,{handlerCheckForParent:this.handlerCheckForParent,checkAll:this.checkAll,deleteHandle:this.deleteHandle,findHandle:this.findHandle,refresh:this.refresh})),this.state.pagination),e)}}),d=React.createClass({displayName:"SearchBar",dateFocus:function(t){e.datePicker(t,this.props.formId)},render:function(){var t=React.createElement("button",{type:"button",className:"ebtn ebtn-success ebtn-rounded",onClick:this.props.goCreate},React.createElement("span",{className:"glyphicon glyphicon-plus","aria-hidden":"true"})," 添加");return this.props.hasAdd||(t=""),0===this.props.searchbar.length&&this.props.hasAdd?React.createElement("div",{className:"tui-searchbar"},React.createElement("div",{className:"form-group"},t)):this.props.searchbar.length>0?React.createElement("div",{className:"tui-searchbar"},this.props.searchbar.map(function(t,a){if("object"==typeof t){var n=t.type||"text",r="";switch(n){case"text":r=React.createElement("div",{className:"form-group",key:a},React.createElement("label",{htmlFor:t.field},t.text),React.createElement("input",{id:t.field,name:t.field,type:"text",ref:t.field,className:"form-control",placeholder:t.placeholder||t.text})," ");break;case"select":var s=t.options,i=[];if("string"==typeof s||s instanceof Array==!1){var l="object"==typeof s,c=l?s.url:s,o=l?s.textField:"text",d=l?s.valueField:"value";$.ajax({method:"GET",async:!1,url:c,success:function(e){i.push(React.createElement("option",{value:""},"不限"));for(var n=0;n<e.length;n++)i.push(React.createElement("option",{value:e[n][d]},e[n][o]));r=React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:t.field},t.text),React.createElement("select",{id:t.field,name:t.field,className:"form-control",key:a},i)," ")},error:function(t,a,n){e.danger(c+"远程调用异常［"+a+", "+n+"］")}});break}i.push(React.createElement("option",{value:""},"不限"));for(var u=0;u<t.options.length;u++)i.push(React.createElement("option",{value:t.options[u].value},t.options[u].text));r=React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:t.field},t.text),React.createElement("select",{id:t.field,name:t.field,className:"form-control",key:a},i)," ");break;case"radio":for(var s=[],u=0;u<t.options.length;u++)s.push(React.createElement("label",null,React.createElement("input",{type:"radio",name:t.field,value:t.options[u].value}),t.options[u].text));r=React.createElement("div",{className:"form-group",key:a},React.createElement("label",{htmlFor:t.field},t.text),s);break;case"date":r=React.createElement("div",{className:"form-group",key:a},React.createElement("label",{htmlFor:t.field},t.text),React.createElement("input",{id:t.field,name:t.field,type:"text",ref:t.field,className:"form-control",onFocus:this.dateFocus,onBlur:this.dateBlur,placeholder:t.placeholder||t.text})," ")}return r}return""}.bind(this)),React.createElement("div",{className:"form-group"}," ",React.createElement("button",{type:"button",className:"ebtn ebtn-primary ebtn-rounded",onClick:this.props._pagingClick,"data-page":"1"},"查询")," ",React.createElement("button",{type:"reset",className:"ebtn ebtn-default ebtn-rounded"},"重置")," ",t)):React.createElement("div",{className:"tui-searchbar"})}}),u=React.createClass({displayName:"ToolBar",render:function(){return React.createElement("div",{className:"tui-toolbar"},this.props.toolbar.map(function(e,t){var a=e.type||"button",n="";switch(a){case"button":n=React.createElement("button",{className:(e.className?e.className:"btn btn-primary")+" tui-mr5",type:"button",onClick:e.handle},e.text);break;case"checkbox":var r=e.id||"",s=e.name||"";e.checked||!1;n=React.createElement("div",null,React.createElement("label",{htmlFor:r,className:"tui-mr5"},e.text),React.createElement("input",{type:"checkbox",id:r,name:s,style:{width:"15",height:"15"},defaultChecked:e.checked}));break;default:n=React.createElement("button",{className:(e.className?e.className:"btn btn-primary")+" tui-mr5",type:"button",onClick:e.handle},e.text)}return React.createElement("div",{className:"form-group"},n)}))}}),p=React.createClass({displayName:"TableData",_checkAll:function(e){this.props.checkAll(e.target.checked)},render:function(){return this.props.rows&&this.props.options?React.createElement("div",{className:"tui-table-div"},React.createElement("table",{className:"tui-table table-striped"},React.createElement("thead",{className:"tui-thead-default"},React.createElement("tr",null,this.props.options.columns.map(function(e,t){var a=e.text;return e.checkbox&&(a=React.createElement("input",{type:"checkbox",checked:this.props.isCheckAll,onChange:this._checkAll})),React.createElement("th",{key:t,style:{width:e.width?e.width:"auto"}},a)}.bind(this)),React.createElement("td",null))),React.createElement("tbody",{className:"tui-tbody-default"},this.props.rows.map(function(e,t){e.isCheck=e.isCheck||!1;var a={row:e,rowHandles:this.props.options.rowHandles,columns:this.props.options.columns,index:t,handlerCheckForParent:this.props.handlerCheckForParent,deleteHandle:this.props.deleteHandle,findHandle:this.props.findHandle,refresh:this.props.refresh};return React.createElement(m,_extends({key:t},a))}.bind(this))))):React.createElement("p",null,"正在加载数据...")}}),m=React.createClass({displayName:"TableRow",deleteHandle:function(t){t.preventDefault();var a=this.props.rowHandles;if(a&&"function"==typeof this.props.rowHandles["delete"]){var n=a["delete"](this.props.row);"object"==typeof n&&n.url?this.props.deleteHandle(n):e.danger("删除事件缺少返回值［url］")}else e.danger("请配置删除事件，参考属性［rowHandles.delete］")},findHandle:function(t){t.preventDefault();var a=this.props.rowHandles;if(a&&"function"==typeof this.props.rowHandles.find){var n=a.find(this.props.row);"object"==typeof n&&n.url?this.props.findHandle(n):e.danger("查看事件缺少返回值［url］")}else e.danger("请配置查看事件，参考属性［rowHandles.find］")},handlerCheck:function(){var e=!this.props.row.isCheck;this.props.handlerCheckForParent(this.props.index,e)},customHandles:function(e){e.preventDefault(),this.props.rowHandles.custom[e.currentTarget.dataset.customid].handle(this.props.row)},render:function(){var e=this.props.rowHandles,t=[];if(e){"function"==typeof e.find&&t.push(React.createElement("a",{href:"javascript:;",className:"tui-mr5",title:"详情",onClick:this.findHandle},React.createElement("i",{className:"fa fa-edit fa-lg"}))),"function"==typeof e["delete"]&&t.push(React.createElement("a",{href:"javascript:;",className:"tui-mr5",title:"删除",onClick:this.deleteHandle,style:{marginRight:"5px"}},React.createElement("i",{className:"fa fa-trash-o fa-lg"})));var a=e.custom,n=[];if(e.custom&&a instanceof Array){for(var r=0;r<a.length;r++){var s=a[r];n.push(React.createElement("li",null,React.createElement("a",{href:"javascript:;",onClick:this.customHandles,"data-customid":r},React.createElement("i",{className:s.className?s.className:""})," ",s.text)))}t.push(React.createElement("div",{className:"btn-group"},React.createElement("a",{href:"javascript:;",className:"dropdown-toggle tui-dropdown-menu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"更多 ",React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu tui-dropdown-menu"},n)))}}return React.createElement("tr",null,this.props.columns.map(function(e,t){var a=this.props.row;if("function"==typeof e.handle){var n=e.handle(a);if(void 0===n&&console.error('TUI Table column["'+e.field+'"] is no return value.'),!e.field){var r={__html:n};return React.createElement("td",{key:t,dangerouslySetInnerHTML:r})}return React.createElement("td",{key:t},n)}if(!(e.field.indexOf(".")>0))return e.checkbox?React.createElement("td",{key:t},React.createElement("input",{type:"checkbox",name:e.field,value:a[e.field],checked:a.isCheck,onChange:this.handlerCheck})):React.createElement("td",{key:t},a[e.field]);var s=e.field.split("."),i="";try{for(var l=0;l<s.length;l++)i=0===l?a[s[l]]:i[s[l]];return React.createElement("td",{key:t},i)}catch(c){return React.createElement("td",{key:t})}}.bind(this)),React.createElement("td",null,t))}}),h=React.createClass({displayName:"Pagination",changeMaxSize:function(){this.props.changeMaxSize(this.refs.maxSize.value)},render:function(){var e=Number(this.props.rowCount)||0,t=Number(this.props.currentPage),a=this.props.maxSize,n=5,r=e%a===0?e/a:parseInt(e/a)+1,s=[],i=1,l=r+1;r>n&&(t-5>=0?(i=t-2,l=t+2,t>=r-3&&(i=r-n+1,l=r),s.push(React.createElement("li",{key:1},React.createElement("a",{href:"javascript:;",onClick:this.props._pagingClick,"data-page":1},1,"..."))),l++):l=n+1);for(var c=i;l>c;c++){var o=React.createElement("li",{key:c},React.createElement("a",{href:"javascript:;",onClick:this.props._pagingClick,"data-page":c},c));c===t&&(o=React.createElement("li",{key:c,className:"active"},React.createElement("a",{href:"javascript:;"},c))),s.push(o)}return r-t>3&&s.push(React.createElement("li",{key:r},React.createElement("a",{href:"javascript:;",onClick:this.props._pagingClick,"data-page":r},"...",r))),React.createElement("nav",null,React.createElement("ul",{className:"pager"},React.createElement("li",null,React.createElement("small",{style:{marginRight:"10px"}},React.createElement("span",null,"共有 ",e," 条,每页显示 ",React.createElement("select",{ref:"maxSize",defaultValue:a,onChange:this.changeMaxSize},React.createElement("option",{value:"10"},"10"),React.createElement("option",{value:"15"},"15"),React.createElement("option",{value:"20"},"20"),React.createElement("option",{value:"30"},"30"),React.createElement("option",{value:"50"},"50"),React.createElement("option",{value:"100"},"100"))," 条"))),React.createElement("li",null,React.createElement("a",{href:"javascript:;",style:{padding:"2px 7px"},onClick:1===t||t-1===0?"":this.props._pagingClick,"data-page":t-1},React.createElement("i",{className:"fa fa-arrow-left"}))),s,React.createElement("li",null,React.createElement("a",{href:"javascript:;",style:{padding:"2px 7px"},onClick:t===r||t+1>r?"":this.props._pagingClick,"data-page":t+1},React.createElement("i",{className:"fa fa-arrow-right"})))))}}),f=function(t,a){if("object"==typeof t&&t.container&&t.container.length>0){var n=document.getElementById(t.container);if(n){var r={options:t,entity:a};ReactDOM.render(React.createElement(o,r),document.getElementById(t.container))}else e.danger("目标容器["+t.container+"]不存在"),console.error("目标容器["+t.container+"]不存在")}else e.danger("TUI Table：请提供一个[container]容器"),console.error("TUI Table：请提供一个[container]容器")},y=React.createClass({displayName:"_Modal",confirm:function(){"success"===this.props.confirm()&&$("#"+this.props.id).modal("hide")},render:function(){var e={__html:this.props.content},t="";return"function"==typeof this.props.confirm&&(t=React.createElement("button",{type:"button",className:"ebtn ebtn-success ebtn-rounded",onClick:this.confirm},"确定")),React.createElement("div",{id:this.props.id,className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":this.props.id+"Label","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog",role:"document"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×"),React.createElement("span",{className:"sr-only"},"Close")),React.createElement("h4",{className:"modal-title",id:this.props.id+"Label"},this.props.title)),React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12",dangerouslySetInnerHTML:e}))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"ebtn ebtn-default ebtn-rounded","data-dismiss":"modal"},"取消")," ",t))))}}),v=function(e){var t=document.getElementById("tui-modal-container"),a={id:e.id||"tui-modal-"+Math.random().toString(36).substr(2),title:e.title||"模态框",content:e.content||"",confirm:e.confirm,className:"show"};t||(t=document.createElement("div"),t.id="tui-modal-container",document.body.appendChild(t)),ReactDOM.render(React.createElement(y,a),t),setTimeout(function(){$("#"+a.id).modal("show")},100)},g=React.createClass({displayName:"AlertModal",render:function(){return React.createElement("span",{className:this.props.type},this.props.msg)}}),E=function(e){var t=document.createElement("div");t.className="tui-alert-modal",document.body.appendChild(t),ReactDOM.render(React.createElement(g,{type:e.type,msg:e.msg}),t),setTimeout(function(){document.body.removeChild(t)},4e3)},R=function(e){this.Alert({type:"success",msg:e})},b=function(e){this.Alert({type:"danger",msg:e})},k=function(e){this.Alert({type:"warning",msg:e})},N=function(e){this.Alert({type:"info",msg:e})},C=React.createClass({displayName:"LoadingModal",render:function(){return React.createElement("div",{className:"tui-loading-parent "+this.props.className},React.createElement("div",{className:"tui-loading"},React.createElement("span",{className:"text"},this.props.text," ",React.createElement("i",{className:"fa fa-spinner fa-spin fa-lg"}))))}}),x=function(e){var t=document.getElementsByClassName("tui-loading-container"),a="";0===t.length?(a=document.createElement("div"),a.className="tui-loading-container",document.body.appendChild(a)):a=t[0],ReactDOM.render(React.createElement(C,{className:e&&e.className?e.className:"show",text:e&&e.text?e.text:"正在加载"}),a)},w={dateFormat:function(e,t){if(e){var a=new Date(e),t=t||"",n=a.getYear()+1900,r=1==(a.getMonth()+1+"").length?"0"+(a.getMonth()+1):a.getMonth()+1,s=1==(a.getDate()+"").length?"0"+a.getDate():a.getDate(),i=1==(a.getHours()+"").length?"0"+a.getHours():a.getHours(),l=1==(a.getMinutes()+"").length?"0"+a.getMinutes():a.getMinutes(),c=1==(a.getSeconds()+"").length?"0"+a.getSeconds():a.getSeconds(),o="";switch(t.toLowerCase()){case"yyyy-mm-dd hh:mm:ss":o=n+"-"+r+"-"+s+"   "+i+":"+l+":"+c;break;case"yyyy-mm-dd":o=n+"-"+r+"-"+s;break;default:o=n+"-"+r+"-"+s+"   "+i+":"+l+":"+c}return o}return""},getElementLeft:function(e){e=e.target;for(var t=e.offsetLeft,a=e.offsetParent;null!==a;)t+=a.offsetLeft,a=a.offsetParent;return t},getElementTop:function(e){e=e.target;for(var t=e.offsetTop,a=e.offsetParent;null!==a;)t+=a.offsetTop,a=a.offsetParent;return t}};e.table=f,e.Modal=v,e.Alert=E,e.success=R,e.danger=b,e.warning=k,e.info=N,e.Loading=x,e.loading=x,e.Utils=w,e.config={simditor:{url:"/upload"}},"undefined"!=typeof module&&"object"==typeof exports?module.exports=e:"function"==typeof define&&(define.amd||define.cmd)?define(function(){return e}):window.TUI=e}).call(function(){return this||("undefined"!=typeof window?window:global)}),function(){var e=React.createClass({displayName:"DatePickerComp",getInitialState:function(){var e=new Date;return{className:"show",year:e.getFullYear(),month:e.getMonth()+1,daysObj:[]}},componentDidMount:function(){this.isMounted()&&this.setState({daysObj:this.renderDays()})},componentWillReceiveProps:function(e){e.className&&e.className.length>0&&this.setState({className:e.className})},getMonthDays:function(e,t){var a=0;return a=2===t?e%4===0?29:28:1===t||3===t||5===t||7===t||8===t||10===t||12===t?31:30},renderDays:function(e,t){e=e||this.state.year,t=t||this.state.month;for(var a=new Date(e+"-"+t+"-1"),n=this.getMonthDays(e,t),r=a.getDay(),s=[],i=[],l=0;r>l;l++)i.push("");for(var l=1;n+1>l;l++)i.push(l),7===i.length&&(s.push({daysArr:i}),i=[]),l===n&&s.push({daysArr:i});return s},setDate:function(e){if(e.preventDefault(),""!==e.target.dataset.day){var t=this.state.year+"-"+this.state.month+"-"+e.target.dataset.day;$("#"+this.props.formId).find("#"+this.props.target.id).val(t),this.setState({className:"hide"})}},prevMonth:function(e){e.preventDefault();var t=this.state.year,a=this.state.month;a-1===0?(t--,a=12):a--,this.setState({year:t,month:a,daysObj:this.renderDays(t,a)})},nextMonth:function(e){e.preventDefault();var t=this.state.year,a=this.state.month;a+1===13?(t++,a=1):a++,this.setState({year:t,month:a,daysObj:this.renderDays(t,a)})},close:function(e){e.preventDefault(),this.setState({className:"hide"})},render:function(){return React.createElement("div",{className:"panel panel-default "+this.state.className},React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"tui-datepicker-head"},React.createElement("a",{onClick:this.prevMonth,href:"javascript:;",className:"pull-left",style:{padding:"8",margin:"8px 0",lineHeight:"0"}},React.createElement("i",{className:"fa fa-arrow-left"})),React.createElement("a",{href:"javascript:;",style:{padding:"8px 50px"}},this.state.month+"月"," ",this.state.year),React.createElement("a",{onClick:this.nextMonth,href:"javascript:;",className:"pull-right",style:{padding:"8",margin:"8px 0",lineHeight:"0"}},React.createElement("i",{className:"fa fa-arrow-right"}))),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Su"),React.createElement("th",null,"Mo"),React.createElement("th",null,"Tu"),React.createElement("th",null,"We"),React.createElement("th",null,"Th"),React.createElement("th",null,"Fr"),React.createElement("th",null,"Sa"))),React.createElement("tbody",null,this.state.daysObj.map(function(e,t){
for(var a=[],n=e.daysArr,r=0;r<n.length;r++)a.push(React.createElement("td",{key:r,"data-day":n[r],onClick:this.setDate},React.createElement("a",{"data-day":n[r],href:"javascript:;"},n[r])));return React.createElement("tr",{key:t},a)}.bind(this)))),React.createElement("div",{className:"tui-datepicker-foot"},React.createElement("a",{href:"javascript:;",onClick:this.close},React.createElement("i",{className:"fa fa-close fa-lg"})))))}}),t=function(t,a){var n=document.getElementById("tui-datepicker");n||(n=document.createElement("div"),n.id="tui-datepicker",n.className="tui-datepicker",document.body.appendChild(n)),n.style.display="block",$("#tui-datepicker").offset({top:TUI.Utils.getElementTop(t)+t.target.offsetHeight,left:TUI.Utils.getElementLeft(t)}),ReactDOM.render(React.createElement(e,{formId:a,className:"show",target:t.target}),n)};TUI.datePicker=t}();